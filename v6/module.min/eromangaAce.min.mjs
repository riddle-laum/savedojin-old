export async function getImgList(){return await _getImgList(document)}async function _getImgList(parent){const r={urls:[],title:""};for(let dom of parent.getElementsByClassName("content-img"))r.urls.push(dom.src);var locate,res;if(r.title="eromanga-ace-",r.title+=(""==(res=(locate=location.href.split("/"))[locate.length-1].replace(/%/g,""))&&(res=locate[locate.length-2].replace(/%/g,"")),res),parent.getElementsByClassName("nextpage")[0]&&parent.getElementsByClassName("nextpage")[0].getElementsByClassName("next")[0]){let dom=document.createElement("html");dom.innerHTML=await getNextPageDom(parent),r.urls=[...r.urls,...(await _getImgList(dom)).urls]}return r}async function getNextPageDom(parent){var locate=parent.getElementsByClassName("nextpage")[0],dom;for(let temp of locate.children)if(1==temp.getElementsByClassName("next").length){locate=temp;break}return await new Promise((resolve,reject)=>{var xhr=new XMLHttpRequest;xhr.open("GET",locate),xhr.addEventListener("load",()=>{dom=xhr.responseText,resolve()}),xhr.addEventListener("error",()=>{reject()}),xhr.send()}),dom}